@model IEnumerable<TaskApp_Web.Models.Message>

@{
    ViewData["Title"] = "Message History";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Mesaj Geçmişi</h2>
    <div id="chatWindow" class="border rounded p-3 mb-3" style="height: 500px; overflow-y: auto; background-color: #f8f9fa;">
        <ul id="messagesList" class="list-unstyled">
            @foreach (var message in Model)
            {
                <li class="@((message.SenderId == ViewBag.SenderId) ? "sent" : "received")">
                    <strong>@((message.SenderId == ViewBag.SenderId) ? "You" : $"User {message.SenderId}"):</strong> @message.Content
                    <span class="text-muted" style="font-size: 0.8em;">@message.Timestamp.ToLocalTime().ToString("HH:mm")</span>
                </li>
            }
        </ul>
    </div>
</div>

<style>
    #chatWindow {
        height: 500px;
        overflow-y: auto;
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #ddd;
    }

    #messagesList li {
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 10px;
        background-color: #e9ecef;
        max-width: 70%;
    }

    #messagesList .sent {
        text-align: right;
        background-color: #007bff;
        color: white;
        margin-left: auto;
    }

    #messagesList .received {
        text-align: left;
        background-color: #f1f1f1;
        margin-right: auto;
    }
</style>
